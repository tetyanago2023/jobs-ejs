<!--views/editJob.ejs-->

<%- include("partials/head.ejs") %>
<%- include("partials/header.ejs") %>

<h2>Edit Job</h2>
<form id="edit-job-form" method="POST" action="/jobs/update/<%= job._id %>">
    <input type="hidden" name="_csrf" value="<%= _csrf %>"> <!-- CSRF Token -->
    <label for="company">Company</label>
    <input type="text" id="company" name="company" value="<%= job.company %>" required autofocus>
    <label for="position">Position</label>
    <input type="text" id="position" name="position" value="<%= job.position %>" required>
    <label for="status">Status</label>
    <select id="status" name="status">
        <option value="pending" <%= job.status === "pending" ? "selected" : "" %>>Pending</option>
        <option value="interview" <%= job.status === "interview" ? "selected" : "" %>>Interview</option>
        <option value="declined" <%= job.status === "declined" ? "selected" : "" %>>Declined</option>
    </select>
    <button type="submit" class="btn btn-primary" id="update-button">Update</button>
    <!-- Back to Jobs Button (Cancel) -->
    <a href="/jobs">
        <button type="button" class="btn btn-secondary">Cancel</button>
    </a>
</form>

<!-- Script to add confirmation before updating a job -->
<script>
    // Add confirmation before submitting the form
    document.getElementById('update-button').addEventListener('click', function(event) {
        const confirmation = confirm("Are you sure you want to update this job?");
        if (!confirmation) {
            event.preventDefault(); // Prevent form submission if canceled
        }
    });
</script>

<%- include("partials/footer.ejs") %>
